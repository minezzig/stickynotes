// const API_BASE_URL = process.env.API_BASE_URL || "http://localhost:4000";
const API_BASE_URL = "http://localhost:4000";

const headers = new Headers();
headers.append("Content-Type", "application/json");

// send fetch request to get all notes
export async function listNotes() {
    const url = new URL(`${API_BASE_URL}/notes`);
    const response = await fetch(url);
    const data = await response.json();
    return data;
}

// send fetch request to post a new note
export async function createNote(note) {
    const url = new URL(`${API_BASE_URL}/notes`);
    const options = {
        method: "POST",
        headers,
        body: JSON.stringify({data: note}), // convert note into JSON format
    }
    const response = await fetch(url, options);
    const data = await response.json();
    return data;
}

export async function editNote(id, editedNote){
    const url = new URL(`${API_BASE_URL}/notes/${id}`)
    const options = {
        method: "PUT",
        headers,
        body: JSON.stringify({data: editedNote}),
    }
    const response = await fetch(url, options);
    const data = await response.json();
    return data;
}

export async function deleteNote(id) {
    const url = new URL(`${API_BASE_URL}/notes/${id}`);
    const options = {
        method: "DELETE",
        headers,
    }
    const response = await fetch(url, options);
    console.log("rese", response)
    // const data = await response.json(); //! add error handling. no response expected
    // console.log(data)
    // return data;
    return;
}

export async function toggleCompleteStatus(id, completed) {
    const url = new URL(`${API_BASE_URL}/notes/${id}`);
    const options = {
        method: "PATCH",
        headers,
        body: JSON.stringify({data: {completed}})
    }
    const response = await fetch(url, options);

}


